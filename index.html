<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DHL eCommerce 路 Customer Master Data Viewer</title>

    <link rel="stylesheet" href="style.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
</head>

<body>
    <header class="topbar">
        <div class="topbar-left">
            <div class="brand">
                <div class="brand-mark">DHL</div>
                <div class="brand-text">
                    <div class="brand-title">Customer Master Data Viewer</div>
                    <div class="brand-subtitle">DHL eCommerce 路 Scenarios 路 MDM Objects 路 Relationships</div>
                </div>
            </div>
        </div>

        <div class="topbar-right">
            <div class="dq-badge" id="dqBadge" title="Data Quality (computed from reference enums)">
                <span class="dq-dot" id="dqDot"></span>
                <span class="dq-text" id="dqText">DQ: N/A</span>
            </div>

            <button id="resetZoom" class="btn btn-secondary" title="Zoom-to-fit / reset view">Reset View</button>
        </div>
    </header>

    <div class="layout">
        <aside class="sidebar">

            <section class="panel">
                <div class="panel-title">Scenario</div>

                <label class="field-label" for="scenarioSelector">Select scenario</label>
                <select id="scenarioSelector" class="select">
                    <option value="">-- Choose Scenario --</option>
                </select>

                <label class="field-label" for="nodeSearch">Search (ID / Name)</label>
                <input id="nodeSearch" class="input" type="text"
                    placeholder="e.g., CUST-..., ACC-..., CON-..., Inditex, Vinted, Shopify..." />

                <div class="hint">
                    Hover a node to preview JSON. Click a node to collapse/expand.
                </div>
            </section>

            <section class="panel">
                <div class="panel-title">Filters</div>

                <div class="stacked-filters">
                    <div class="stack-item">
                        <div class="stack-label">Customer Type</div>
                        <select id="filterCustomerType" class="select">
                            <option value="">All</option>
                        </select>
                    </div>

                    <div class="stack-item">
                        <div class="stack-label">Industry</div>
                        <select id="filterIndustry" class="select">
                            <option value="">All</option>
                        </select>
                    </div>

                    <div class="stack-item">
                        <div class="stack-label">Sales Channel</div>
                        <select id="filterSalesChannel" class="select">
                            <option value="">All</option>
                        </select>
                    </div>
                </div>

                <div class="filter-actions">
                    <button id="clearFilters" class="btn btn-outline" title="Clear all filters">Clear Filters</button>
                </div>
            </section>

            <section class="panel">
                <div class="panel-title">View</div>

                <div class="view-grid">
                    <label class="toggle">
                        <input type="checkbox" id="toggleAddresses" checked />
                        <span>Addresses</span>
                    </label>

                    <label class="toggle">
                        <input type="checkbox" id="toggleContacts" checked />
                        <span>Contacts</span>
                    </label>

                    <label class="toggle">
                        <input type="checkbox" id="toggleContracts" checked />
                        <span>Contracts</span>
                    </label>
                </div>

                <div class="filter-actions">
                    <button id="collapseAll" class="btn btn-outline" title="Collapse all subtrees">Collapse All</button>
                    <button id="expandAll" class="btn btn-outline" title="Expand all subtrees">Expand All</button>
                </div>
            </section>

            <section class="panel json-panel">
                <div class="panel-title">Selected / Hover JSON</div>
                <pre id="json-display" class="json-display">{}</pre>
            </section>
        </aside>

        <main class="canvas">
            <div id="viz-container" class="viz-container"></div>

            <!-- Legend overlay -->
            <div id="legendBar" class="legend-bar" aria-label="Object legend"></div>

            <div class="footer-note">
                Data sources:
                <code>/data/customerData.json</code>,
                <code>/data/reference_master_data.json</code>,
                <code>/data/reference_colors.json</code>
            </div>
        </main>
    </div>

    <script src="script.js"></script>
</body>

</html>