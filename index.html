<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DHL eCommerce · Customer Master Data Viewer</title>

    <link rel="stylesheet" href="style.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
</head>

<body>
    <!-- Top bar (brand + controls) -->
    <header class="topbar">
        <div class="brand">
            <div class="brand-mark">DHL</div>
            <div class="brand-text">
                <div class="brand-title">Customer Master Data Viewer</div>
                <div class="brand-subtitle">DHL eCommerce · Scenarios · MDM Objects · Relationships</div>
            </div>
        </div>

        <!-- Controls (formerly in left sidebar) -->
        <div class="toolbar" aria-label="Scenario and filter controls">
            <div class="toolbar-group">
                <div class="toolbar-label">Scenario</div>
                <select id="scenarioSelector" class="toolbar-select" title="Select scenario">
                    <option value="">-- Choose Scenario --</option>
                </select>
            </div>

            <div class="toolbar-group">
                <div class="toolbar-label">Customer Type</div>
                <select id="filterCustomerType" class="toolbar-select"
                    title="Filter scenarios by customer type"></select>
            </div>

            <div class="toolbar-group">
                <div class="toolbar-label">Industry</div>
                <select id="filterIndustry" class="toolbar-select" title="Filter scenarios by industry"></select>
            </div>

            <div class="toolbar-group">
                <div class="toolbar-label">Sales Channel</div>
                <select id="filterSalesChannel" class="toolbar-select"
                    title="Filter scenarios by sales channel"></select>
            </div>

            <div class="toolbar-group toolbar-grow">
                <div class="toolbar-label">Search (ID / Name)</div>
                <input id="nodeSearch" class="toolbar-input" type="text"
                    placeholder="e.g., CUST-…, ACC-…, CON-…, Inditex, Vinted, Shopify…" />
            </div>
        </div>

        <div class="topbar-right">
            <div class="dq-badge" id="dqBadge" title="Data Quality (computed from reference enums)">
                <span class="dq-dot" id="dqDot"></span>
                <span class="dq-text" id="dqText">DQ: N/A</span>
            </div>

            <button id="toggleSidebar" class="btn btn-secondary" title="Collapse / expand inspector">Inspector</button>
            <button id="resetZoom" class="btn btn-secondary" title="Zoom-to-fit / reset view">Reset View</button>
        </div>
    </header>

    <div class="layout">
        <!-- Left inspector (collapsible) -->
        <aside class="sidebar" aria-label="Inspector">
            <section class="panel">
                <div class="panel-title">Selected object</div>

                <div id="inspectorMeta" class="inspector-meta">
                    <div class="kv">
                        <div class="k">Hover/Click</div>
                        <div class="v">Select a node to see details</div>
                    </div>
                </div>

                <div id="inspectorContext" class="inspector-context" style="margin-top:10px;"></div>
            </section>

            <section class="panel">
                <div class="panel-title">Business meaning</div>
                <div class="hint">
                    This panel explains the selected node in plain language using your master data definitions
                    (customer type + sales channel mapping).
                </div>
                <div id="inspectorDefs" class="inspector-defs"></div>
            </section>

            <section class="panel">
                <div class="panel-title">Readable JSON</div>
                <div class="hint">A friendly view of the object so non-technical readers can still understand it.</div>
                <div id="prettyJson" class="pretty-json"></div>
            </section>
        </aside>

        <!-- Canvas -->
        <main class="canvas">
            <div id="viz-container" class="viz-container"></div>
        </main>
    </div>

    <!-- Footer (legend + sources) -->
    <footer class="footer">
        <div id="footerLegend" class="legend-footer" aria-label="Legend"></div>
        <div class="footer-right">
            <span class="footer-label">Data:</span>
            <code>/data/customerData.json</code>
            <code>/data/reference_master_data.json</code>
            <code>/data/reference_colors.json</code>
        </div>
    </footer>

    <script src="script.js"></script>
</body>

</html>